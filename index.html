<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kampus Connect</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://kit.fontawesome.com/ab05a6b4fa.js" crossorigin="anonymous"></script>
  
    <!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>

<!-- Firebase App (core SDK) -->
<script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-app-compat.js"></script>

<!-- Firestore SDK -->
<script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-firestore-compat.js"></script>

<script>
    // Your Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyAx3LcZnN2DSwx-YLdvG7an0Mgnr4NlQXk",
      authDomain: "event-management-6eab1.firebaseapp.com",
      projectId: "event-management-6eab1",
      storageBucket: "event-management-6eab1.appspot.com",
      messagingSenderId: "792652272458",
      appId: "1:792652272458:web:0aa7019690d73b7801e7b3"
    };
  
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
  
    async function loadRandomEvent() {
      try {
        const snapshot = await db.collection("verified_events").get();
        const docs = snapshot.docs;
  
        if (docs.length === 0) return;
  
        // Display single random event in main and mini image
        const randomDoc = docs[Math.floor(Math.random() * docs.length)];
        const data = randomDoc.data();
  
        const titleEl = document.getElementById("event-title");
        const dateEl = document.getElementById("event-date");
        const mainImage = document.getElementById("main-image");
        const miniImage = document.getElementById("mini-image");
  
        if (titleEl) titleEl.textContent = data.event_name || "Untitled Event";
        if (dateEl) dateEl.textContent = data.start_date || "TBA";
  
        const base64Prefix = "data:image/jpeg;base64,";
        const imageSrc = data.event_image_base64 ? `${base64Prefix}${data.event_image_base64}` : "fallback.jpg";
  
        if (mainImage) mainImage.src = imageSrc;
        if (miniImage) miniImage.src = imageSrc;
  
        const miniImageContainer = document.getElementById("miniImageContainer");
  
        // ALSO: Display 6 random event cards below
        loadRandomEventCards(docs);
        loadWorkshopEventCards(docs);
        loadHackathonEventCards(docs);


  
      } catch (error) {
        console.error("Error loading event:", error);
      }
    }
  
    function renderEventCard(eventData) {
      const container = document.createElement("div");
      container.className = "feature-container";
      container.onclick = () => openPopup({
        title: eventData.event_name,
        description: eventData.event_caption,
        imageUrl: `data:image/jpeg;base64,${eventData.event_image_base64}`,
        date: new Date(eventData.start_date).toDateString(),
        collegeName: eventData.college,
        collegeLocation: `${eventData.city}, ${eventData.state}`,
        contactNumber: eventData.contact_number || "N/A",
        contactEmail: eventData.contact_email || "N/A",
        registrationFee: eventData.event_fee || "N/A",
        registrationLink: eventData.registration_link || "#",
        eventDescription: eventData.event_description || ""
      });
  
      container.innerHTML = `
        <div class="feature-card">
          <span class="feature-hover-text">${eventData.event_caption}</span>
          <img src="data:image/jpeg;base64,${eventData.event_image_base64}" alt="${eventData.event_name}">
        </div>
        <div class="feature-details">
          <h3 class="feature-title">${eventData.event_name}</h3>
          <p class="feature-author">on&nbsp;&nbsp;&nbsp;<strong>${new Date(eventData.start_date).toDateString()}</strong></p>
        </div>
      `;
  
      document.querySelector(".feature-grid").appendChild(container);
    }
  
    function loadRandomEventCards(allDocs) {
      if (!Array.isArray(allDocs)) return;
  
      const events = allDocs.map(doc => doc.data());
      events.sort(() => 0.5 - Math.random()); // shuffle
      const selected = events.slice(0, 6);
  
      const featureGrid = document.querySelector(".feature-grid");
      if (featureGrid) {
        featureGrid.innerHTML = ""; // Clear any existing
        selected.forEach(renderEventCard);
      }
    }

    function loadWorkshopEventCards(allDocs) {
        if (!Array.isArray(allDocs)) return;

        const workshops = allDocs
            .map(doc => doc.data())
            .filter(event => event.event_type?.toLowerCase() === "workshop");

        workshops.sort(() => 0.5 - Math.random()); // shuffle
        const selected = workshops.slice(0, 6);

        const workshopGrid = document.getElementById("workshop-grid");
        if (workshopGrid) {
            workshopGrid.innerHTML = ""; // Clear any existing
            selected.forEach(eventData => {
            const container = document.createElement("div");
            container.className = "feature-container";
            container.onclick = () => openPopup({
                title: eventData.event_name,
                description: eventData.event_caption,
                imageUrl: `data:image/jpeg;base64,${eventData.event_image_base64}`,
                date: new Date(eventData.start_date).toDateString(),
                collegeName: eventData.college,
                collegeLocation: `${eventData.city}, ${eventData.state}`,
                contactNumber: eventData.contact_number || "N/A",
                contactEmail: eventData.contact_email || "N/A",
                registrationFee: eventData.event_fee || "N/A",
                registrationLink: eventData.registration_link || "#",
                eventDescription: eventData.event_description || ""
            });

            container.innerHTML = `
                <div class="feature-card">
                <span class="feature-hover-text">${eventData.event_caption}</span>
                <img src="data:image/jpeg;base64,${eventData.event_image_base64}" alt="${eventData.event_name}">
                </div>
                <div class="feature-details">
                <h3 class="feature-title">${eventData.event_name}</h3>
                <p class="feature-author">on&nbsp;&nbsp;&nbsp;<strong>${new Date(eventData.start_date).toDateString()}</strong></p>
                </div>
            `;

            workshopGrid.appendChild(container);
            });
        }
        }

        function loadHackathonEventCards(allDocs) {
            if (!Array.isArray(allDocs)) return;

            const hackathons = allDocs
                .map(doc => doc.data())
                .filter(event => event.event_type?.toLowerCase() === "hackathon");

            hackathons.sort(() => 0.5 - Math.random()); // shuffle
            const selected = hackathons.slice(0, 6);

            const hackathonGrid = document.getElementById("hackathon-grid");
            if (hackathonGrid) {
                hackathonGrid.innerHTML = ""; // Clear any existing
                selected.forEach(eventData => {
                const container = document.createElement("div");
                container.className = "feature-container";
                container.onclick = () => openPopup({
                    title: eventData.event_name,
                    description: eventData.event_caption,
                    imageUrl: `data:image/jpeg;base64,${eventData.event_image_base64}`,
                    date: new Date(eventData.start_date).toDateString(),
                    collegeName: eventData.college,
                    collegeLocation: `${eventData.city}, ${eventData.state}`,
                    contactNumber: eventData.contact_number || "N/A",
                    contactEmail: eventData.contact_email || "N/A",
                    registrationFee: eventData.event_fee || "N/A",
                    registrationLink: eventData.registration_link || "#",
                    eventDescription: eventData.event_description || ""
                });

                container.innerHTML = `
                    <div class="feature-card">
                    <span class="feature-hover-text">${eventData.event_caption}</span>
                    <img src="data:image/jpeg;base64,${eventData.event_image_base64}" alt="${eventData.event_name}">
                    </div>
                    <div class="feature-details">
                    <h3 class="feature-title">${eventData.event_name}</h3>
                    <p class="feature-author">on&nbsp;&nbsp;&nbsp;<strong>${new Date(eventData.start_date).toDateString()}</strong></p>
                    </div>
                `;

                hackathonGrid.appendChild(container);
                });
            }
            }
    document.addEventListener("DOMContentLoaded", loadRandomEvent);

    document.addEventListener("DOMContentLoaded", function () {
        let isLoggedIn = localStorage.getItem("isLoggedIn");
        let loginButton = document.querySelector(".auth-buttons a[href='login.html']");
        let signupButton = document.querySelector(".auth-buttons a[href='signup.html']");
        let profileIcon = document.getElementById("profileIcon");
        let logoutButton = document.getElementById("logoutButton");
        let createEventLink = document.getElementById("createEventLink");
        let viewEventsLink = document.getElementById("viewEventsLink");
        let viewWorkshopLink = document.getElementById("viewWorkshopLink");
        let viewHackathonLink = document.getElementById("viewHackathonLink");
        let explorebox = document.getElementById("explore-box");
        let searchbox = document.getElementById("search-box2");


        // âœ… Ensure elements exist before modifying them
        if (!loginButton || !signupButton || !profileIcon || !logoutButton || !createEventLink) {
            console.error("One or more elements not found!");
            return;
        }

        // âœ… Set default visibility
        loginButton.style.display = "inline-block";
        signupButton.style.display = "inline-block";
        profileIcon.style.display = "none";
        logoutButton.style.display = "none";

        // âœ… Login logic
        if (isLoggedIn === "true") {
            console.log("User is logged in");
            loginButton.style.display = "none";
            signupButton.style.display = "none";
            profileIcon.style.display = "block";
            logoutButton.style.display = "inline-block";
            createEventLink.href = "createevent.html"; // ğŸ”¹ Set correct link when logged in
            viewEventsLink.href = "events.html";
            explorebox.href = "events.html";
            searchbox.href ="events.html";
            viewWorkshopLink.href = "events.html?filter=Workshop";
            viewHackathonLink.href = "events.html?filter=Hackathon";
            createEventLink.style.display = "block";    // Show button
        } else {
            console.log("User is NOT logged in");
            createEventLink.href = "login.html";        // ğŸ”¹ Redirect to login if not logged in
            viewEventsLink.href = "login.html";
            viewWorkshopLink.href = "login.html";
            viewHackathonLink.href = "login.html";
            explorebox.href = "signup.html";
            searchbox.href = "signup.html";
            createEventLink.style.display = "block";    // Show button anyway, but as login
        }

        // âœ… Logout logic
        logoutButton.addEventListener("click", function (event) {
            event.preventDefault();
            localStorage.removeItem("isLoggedIn");
            window.location.href = "index.html";
        });
    });


  </script>
   

</head>
<body>
    <header class="navbar" id="home-navbar">
        <div class="logo">K.</div>
        <nav>
            <ul class="nav-links">
                <li><a href="events.html" id="explore-box">Explore</a></li>
                <li><a href="#feature-events-section">Events</a></li>
                <li><a href="#workshop-events-section">Workshops</a></li>
                <li><a href="#hackathon-events-section">Hackathons</a></li>
            </ul>
        </nav>
        <a href="events.html" id="search-box2">
        <div class="search-container">
            <input type="text" placeholder="Search for College Events" id="search-box">
            <button id="search-btn"><i class="fas fa-search"></i></button>
        </div>
        </a>
        <div class="auth-buttons">
            <a href="login.html" id="loginButton">Log in</a>
            <a href="signup.html" id="signupButton">Sign Up</a>
            <a href="#" id="logoutButton" style="display: none;">Logout</a>
        </div>
        <div class="profile-icon" id="profileIcon" style="display: none;">
            <i class="fas fa-user-circle"></i>
        </div>
            <a href="createevent.html" id="createEventLink">
                <button class="btn-pro">Create Event</button>
            </a>
        </div>  
    </header>

    <section class="searchbar">
        <div class="search-popup" id="searchPopup">
            <div class="search-popup-content">
                <div class="search-container-2">
                    <input type="text" placeholder="Search for College Events">
                    <button id="search-btn"><i class="fas fa-search"></i></button>
                </div>
            </div>
        </div> 
    </section>

    <section class="hero">
        <p class="upcoming">
          Upcoming event: <span class="date" id="event-date">Loading...</span>
        </p>
        <h1 class="title" id="event-title">Loading...</h1>
      </section>
      
      <section class="image-section" id="eventImageSection">
        <div class="image-container" id="miniImageContainer">
          <img id="main-image" src="" alt="Featured Image" class="featured-image" />
          <img id="mini-image" src="" alt="Mini Image" class="mini-image" />
        </div>
      </section>
      
    

    <section class="hero2" id="feature-events-section">
        <p class="upcoming">Events</p>
        <h1 class="title">FEATURED</h1>
    </section>

    <section class="feature-section">
        <div class="feature-grid"></div> <!-- For the 6 random events -->

        <!-- View More Link -->
        <div class="view-more">
            <p>
              Check out all events&nbsp;&nbsp;<span class="arrow">â†’</span>
              <a href="events.html" class="view-events" id="viewEventsLink">View Events</a>
            </p>
          </div>          
    </section>    

    <section class="hero2" id="workshop-events-section">
        <p class="upcoming">upcoming</p>
        <h1 class="title">WORKSHOPS</h1>
      </section>
      
      <section class="feature-section">
        <div class="feature-grid" id="workshop-grid"></div> <!-- For 6 workshops -->
      
        <!-- View More Link -->
        <div class="view-more">
          <p>
            Explore all workshops&nbsp;&nbsp;<span class="arrow">â†’</span> 
            <a href="events.html?filter=Workshop" class="view-events" id="viewWorkshopLink">View Workshops</a>
          </p>
        </div>
      </section>

      <section class="hero2" id="hackathon-events-section">
        <p class="upcoming">Featured</p>
        <h1 class="title">HACKATHONS</h1>
      </section>
      
      <section class="feature-section">
        <div class="feature-grid" id="hackathon-grid"></div> <!-- For 6 hackathons -->
      
        <!-- View More Link -->
        <div class="view-more">
          <p>Discover more hackathons&nbsp;&nbsp;<span class="arrow">â†’</span> 
            <a href="events.html?filter=hackathon" class="view-events" id="viewHackathonLink">View Hackathons</a>
          </p>
        </div>
      </section>
      
      
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-logo">
                <span>K.</span>
            </div>
            <div class="footer-links">
                <div class="footer-column">
                    <a href="#home-navbar">Home</a>
                    <a href="#feature-events-section">Events</a>
                    <a href="events.html">Explore</a>
                </div>
                <div class="footer-column">
                    <a href="#workshop-events-section">Workshops</a>
                    <a href="#hackathon-events-section">Hackathons</a>
                </div>
                <div class="footer-column">
                    <a href="faq.html">FAQs</a>
                    <a href="aboutUs.html">About Us</a>
                    <a href="contact.html">Contact Us</a>
                </div>
            </div>
        </div>
    </footer>    

    <nav class="bottom-nav" id="bottomNav">
        <ul>
            <li><a href="#" class="static-btn">K.</a></li>
            <li><a href="#home-navbar"></i> Home</a></li>
            <li><a href="#feature-events-section"></i> Events</a></li>
            <li><a href="#workshop-events-section"> Workshops</a></li>
            <li><a href="#hackathon-events-section">Hackathons</a></li>
            <li><a href="createevent.html" class="static-btn2">Create Event</a></li>
        </ul>
    </nav>    
</body>
</html>

<!--
Â <script>
Â  Â  Â  Â  let navTimeout;
Â  Â  Â  Â  const bottomNav = document.getElementById("bottomNav");
Â  Â  Â  Â  function hideNav() {
Â  Â  Â  Â  Â  Â  bottomNav.classList.add("hidden");
Â  Â  Â  Â  }
Â  Â  Â  Â  function showNav() {
Â  Â  Â  Â  Â  Â  bottomNav.classList.remove("hidden");
Â  Â  Â  Â  Â  Â  clearTimeout(navTimeout);
Â  Â  Â  Â  Â  Â  navTimeout = setTimeout(hideNav, 5000);
Â  Â  Â  Â  }
Â  Â  Â  Â  document.addEventListener("mousemove", showNav);
Â  Â  Â  Â  document.addEventListener("scroll", showNav);
Â  Â  Â  Â  const searchBtn = document.getElementById("search-box");
Â  Â  Â  Â  const exploreBtn = document.getElementById("explore-box");
Â  Â  Â  Â  const searchPopup = document.getElementById("searchPopup");
Â  Â  Â  Â  const closeSearchPopupBtn = document.getElementById("closePopup");
Â  Â  Â  Â  const searchPopupContent = document.querySelector(".search-popup-content");
Â  Â  Â  Â  searchBtn.addEventListener("click", (event) => {
Â  Â  Â  Â  Â  Â  event.stopPropagation();
Â  Â  Â  Â  Â  Â  searchPopup.classList.add("active");
Â  Â  Â  Â  Â  Â  document.body.style.overflow = "hidden";
Â  Â  Â  Â  });
Â  Â  Â  Â  exploreBtn.addEventListener("click", (event) => {
Â  Â  Â  Â  Â  Â  event.stopPropagation();
Â  Â  Â  Â  Â  Â  searchPopup.classList.add("active");
Â  Â  Â  Â  Â  Â  document.body.style.overflow = "hidden";
Â  Â  Â  Â  });
Â  Â  Â  Â  function closeSearchPopup() {
Â  Â  Â  Â  Â  Â  searchPopup.classList.remove("active");
Â  Â  Â  Â  Â  Â  document.body.style.overflow = "auto";
Â  Â  Â  Â  }
Â  Â  Â  Â  if (closeSearchPopupBtn) {
Â  Â  Â  Â  Â  Â  closeSearchPopupBtn.addEventListener("click", (event) => {
Â  Â  Â  Â  Â  Â  Â  Â  event.stopPropagation();
Â  Â  Â  Â  Â  Â  Â  Â  closeSearchPopup();
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }
Â  Â  Â  Â  document.addEventListener("click", (event) => {
Â  Â  Â  Â  Â  Â  if (!searchPopupContent.contains(event.target) && searchPopup.classList.contains("active")) {
Â  Â  Â  Â  Â  Â  Â  Â  closeSearchPopup();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });
Â  Â  Â  Â  function openPopup(data) {
Â  Â  Â  Â  Â  Â  document.getElementById("popup-title").innerText = data.title;
Â  Â  Â  Â  Â  Â  document.getElementById("popup-image").src = data.imageUrl;
Â  Â  Â  Â  Â  Â  document.getElementById("popup-date").innerText = data.date;
Â  Â  Â  Â  Â  Â  document.getElementById("popup-description").innerText=data.description;
Â  Â  Â  Â  Â  Â  document.getElementById("popup-college-name").innerText = data.collegeName;
Â  Â  Â  Â  Â  Â  document.getElementById("popup-college-location").innerText = data.collegeLocation;
Â  Â  Â  Â  Â  Â  document.getElementById("popup-contact-number").innerText = data.contactNumber;
Â  Â  Â  Â  Â  Â  document.getElementById("popup-contact-email").innerText = data.contactEmail;
Â  Â  Â  Â  Â  Â  document.getElementById("popup-registration-fee").innerText = data.registrationFee;
Â  Â  Â  Â  Â  Â  document.getElementById("popup-registration-link").innerText = data.registrationLink;
Â  Â  Â  Â  Â  Â  document.getElementById("popup-event-description").innerText = data.eventDescription;
Â  Â  Â  Â  Â  Â  document.getElementById("popupOverlay").style.display = "flex";
Â  Â  Â  Â  Â  Â  document.getElementById('popupOverlay').classList.add('active');
Â  Â  Â  Â  Â  Â  document.body.style.overflow = "hidden";
Â  Â  Â  Â  }
Â  Â  Â  Â  function closeEventPopup() {
Â  Â  Â  Â  Â  Â  document.getElementById('popupOverlay').classList.remove('active');
Â  Â  Â  Â  Â  Â  document.getElementById("popupOverlay").style.display = "none";
Â  Â  Â  Â  Â  Â  document.body.style.overflow = "auto"; 
Â  Â  Â  Â  }
Â  Â  Â  Â  document.addEventListener("DOMContentLoaded", function () {
Â  Â  let isLoggedIn = localStorage.getItem("isLoggedIn");
Â  Â  let loginButton = document.querySelector(".auth-buttons a[href='login.html']");
Â  Â  let signupButton = document.querySelector(".auth-buttons a[href='signup.html']");
Â  Â  let profileIcon = document.getElementById("profileIcon");
Â  Â  let logoutButton = document.getElementById("logoutButton");
Â  Â  // âœ… Ensure elements exist before modifying them
Â  Â  if (!loginButton || !signupButton || !profileIcon || !logoutButton) {
Â  Â  Â  Â  console.error("One or more elements not found!");
Â  Â  Â  Â  return;
Â  Â  }
Â  Â  // âœ… Set default visibility
Â  Â  loginButton.style.display = "inline-block";
Â  Â  signupButton.style.display = "inline-block";
Â  Â  profileIcon.style.display = "none";
Â  Â  logoutButton.style.display = "none"; // Initially hidden
Â  Â  // âœ… Hide login/signup buttons and show profile & logout button if logged in
Â  Â  if (isLoggedIn === "true") {
Â  Â  Â  Â  console.log("User is logged in"); Â // âœ… Debugging
Â  Â  Â  Â  loginButton.style.display = "none";
Â  Â  Â  Â  signupButton.style.display = "none";
Â  Â  Â  Â  profileIcon.style.display = "block";
Â  Â  Â  Â  logoutButton.style.display = "inline-block"; // Show logout button
Â  Â  } else {
Â  Â  Â  Â  console.log("User is NOT logged in"); Â // âœ… Debugging
Â  Â  }
Â  Â  // âœ… Logout Functionality
Â  Â  logoutButton.addEventListener("click", function (event) {
Â  Â  Â  Â  event.preventDefault();
Â  Â  Â  Â  localStorage.removeItem("isLoggedIn"); // ğŸ”¹ Clear login status
Â  Â  Â  Â  window.location.href = "index.html"; // ğŸ”¹ Redirect to login page
Â  Â  });
Â  Â  document.addEventListener("DOMContentLoaded", function () {
Â  Â  let isLoggedIn = localStorage.getItem("isLoggedIn");
Â  Â  let createEventButton = document.getElementById("createEventLink");
Â  Â  if (isLoggedIn === "true") {
Â  Â  Â  Â  createEventButton.style.display = "block"; // âœ… Show button if logged in
Â  Â  } else {
Â  Â  Â  Â  createEventButton.style.display = "none"; // âŒ Hide button if not logged in
Â  Â  }
});
});
Â  Â  </script>

git commit -m"the static images changed from the index page to real event cards, added hackathon section, connected events page to display filtered events from index page. styles changed, new pages faq, about us, contact, were added, which need modification, before login and after login conditions modified. pop up removed in index page.
-->

